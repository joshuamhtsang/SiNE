# SiNE Example: Two Room WiFi6 Network (Poor Link Quality)
#
# This example demonstrates a wireless network with degraded link quality:
# - Uses larger rooms (10m x 8m each) for greater separation
# - Server positioned in far back corner of Room 1 (away from doorway)
# - Client positioned in opposite far corner of Room 2 (away from doorway)
# - ~22m diagonal separation with no direct line-of-sight through doorway
# - Signals must diffract around walls or penetrate concrete
#
# Expected behavior: Higher path loss, lower SNR, increased packet loss
# compared to the two_room_wifi example where nodes are aligned with doorway.
#
# Usage:
#   1. Build the node image: docker build -t sine-node:latest docker/node/
#   2. Start the channel server: uv run sine channel-server
#   3. Deploy the emulation: uv run sine deploy examples/two_room_wifi_poor/network.yaml
#   4. Test connectivity:
#      - Server: docker exec -it clab-two-room-wifi-poor-server iperf3 -s
#      - Client: docker exec -it clab-two-room-wifi-poor-client iperf3 -c <server-ip>
#   5. Cleanup: uv run sine destroy examples/two_room_wifi_poor/network.yaml

name: two-room-wifi-poor
prefix: clab

topology:
  # Scene configuration
  # Uses larger two-room scene for greater node separation
  scene:
    file: scenes/two_room_large.xml

  # Node definitions
  nodes:
    # Server node in far back corner of Room 1 (away from doorway at y=4.0)
    server:
      kind: linux
      image: sine-node:latest
      wireless:
        rf_power_dbm: 23.0          # Typical WiFi AP transmit power
        antenna_pattern: iso        # Isotropic antenna pattern
        polarization: V             # Vertical polarization
        antenna_gain_dbi: 2.0       # Small antenna gain
        frequency_ghz: 5.18         # WiFi6 5GHz channel 36
        bandwidth_mhz: 80           # 80 MHz channel width (WiFi6)
        modulation: 64qam           # 64-QAM modulation
        fec_type: ldpc              # LDPC forward error correction
        fec_code_rate: 0.5          # Rate-1/2 coding
        position:
          x: 1.0                    # Far back corner of Room 1 (near x=0 wall)
          y: 0.5                    # Near back wall (y=0), far from door at y=4
          z: 1.5                    # Typical device height

    # Client node in opposite far corner of Room 2
    client:
      kind: linux
      image: sine-node:latest
      wireless:
        rf_power_dbm: 18.0          # Typical client transmit power
        antenna_pattern: iso        # Isotropic antenna pattern
        polarization: V             # Vertical polarization
        antenna_gain_dbi: 0.0       # No antenna gain (built-in antenna)
        frequency_ghz: 5.18         # Same channel as server
        bandwidth_mhz: 80
        modulation: 64qam
        fec_type: ldpc
        fec_code_rate: 0.5
        position:
          x: 19.0                   # Far side of Room 2 (near x=20.15 wall)
          y: 7.5                    # Near front wall (y=8), far from door at y=4
          z: 1.0                    # Slightly lower (e.g., on desk)

  # Wireless links between nodes
  wireless_links:
    - endpoints: [server, client]

  # Channel computation server URL
  channel_server: "http://localhost:8000"

  # Mobility polling interval (milliseconds)
  mobility_poll_ms: 100
